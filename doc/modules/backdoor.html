
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>backdoor – Python interactive interpreter within a running process &#8212; Eventlet 0.28.1 documentation</title>
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="corolocal – Coroutine local storage" href="corolocal.html" />
    <link rel="prev" title="Module Reference" href="../modules.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="corolocal.html" title="corolocal – Coroutine local storage"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../modules.html" title="Module Reference"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Eventlet 0.28.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../modules.html" accesskey="U">Module Reference</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="backdoor-python-interactive-interpreter-within-a-running-process">
<h1><code class="xref py py-mod docutils literal notranslate"><span class="pre">backdoor</span></code> – Python interactive interpreter within a running process<a class="headerlink" href="#backdoor-python-interactive-interpreter-within-a-running-process" title="Permalink to this headline">¶</a></h1>
<p>The backdoor module is convenient for inspecting the state of a long-running process.  It supplies the normal Python interactive interpreter in a way that does not block the normal operation of the application.  This can be useful for debugging, performance tuning, or simply learning about how things behave in situ.</p>
<p>In the application, spawn a greenthread running backdoor_server on a listening socket:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">eventlet</span><span class="o">.</span><span class="n">spawn</span><span class="p">(</span><span class="n">backdoor</span><span class="o">.</span><span class="n">backdoor_server</span><span class="p">,</span> <span class="n">eventlet</span><span class="o">.</span><span class="n">listen</span><span class="p">((</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="mi">3000</span><span class="p">)),</span> <span class="nb">locals</span><span class="p">())</span>
</pre></div>
</div>
<p>When this is running, the backdoor is accessible via telnet to the specified port.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ telnet localhost <span class="m">3000</span>
<span class="o">(</span>python version, build info<span class="o">)</span>
Type <span class="s2">&quot;help&quot;</span>, <span class="s2">&quot;copyright&quot;</span>, <span class="s2">&quot;credits&quot;</span> or <span class="s2">&quot;license&quot;</span> <span class="k">for</span> more information.
&gt;&gt;&gt; import myapp
&gt;&gt;&gt; dir<span class="o">(</span>myapp<span class="o">)</span>
<span class="o">[</span><span class="s1">&#39;__all__&#39;</span>, <span class="s1">&#39;__doc__&#39;</span>, <span class="s1">&#39;__name__&#39;</span>, <span class="s1">&#39;myfunc&#39;</span><span class="o">]</span>
&gt;&gt;&gt;
</pre></div>
</div>
<p>The backdoor cooperatively yields to the rest of the application between commands, so on a running server continuously serving requests, you can observe the internal state changing between interpreter commands.</p>
<span class="target" id="module-eventlet.backdoor"></span><dl class="py class">
<dt id="eventlet.backdoor.SocketConsole">
<em class="property">class </em><code class="sig-prename descclassname">eventlet.backdoor.</code><code class="sig-name descname">SocketConsole</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">desc</span></em>, <em class="sig-param"><span class="n">hostport</span></em>, <em class="sig-param"><span class="n">locals</span></em><span class="sig-paren">)</span><a class="headerlink" href="#eventlet.backdoor.SocketConsole" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="eventlet.backdoor.SocketConsole.switch">
<code class="sig-name descname">switch</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#eventlet.backdoor.SocketConsole.switch" title="Permalink to this definition">¶</a></dt>
<dd><p>Switch execution to this greenlet.</p>
<p>If this greenlet has never been run, then this greenlet
will be switched to using the body of self.run(<a href="#id1"><span class="problematic" id="id2">*</span></a>args, <a href="#id3"><span class="problematic" id="id4">**</span></a>kwargs).</p>
<p>If the greenlet is active (has been run, but was switch()’ed
out before leaving its run function), then this greenlet will
be resumed and the return value to its switch call will be
None if no arguments are given, the given argument if one
argument is given, or the args tuple and keyword args dict if
multiple arguments are given.</p>
<p>If the greenlet is dead, or is the current greenlet then this
function will simply return the arguments using the same rules as
above.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="eventlet.backdoor.backdoor">
<code class="sig-prename descclassname">eventlet.backdoor.</code><code class="sig-name descname">backdoor</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn_info</span></em>, <em class="sig-param"><span class="n">locals</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#eventlet.backdoor.backdoor" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets up an interactive console on a socket with a single connected
client.  This does not block the caller, as it spawns a new greenlet to
handle the console.  This is meant to be called from within an accept loop
(such as backdoor_server).</p>
</dd></dl>

<dl class="py function">
<dt id="eventlet.backdoor.backdoor_server">
<code class="sig-prename descclassname">eventlet.backdoor.</code><code class="sig-name descname">backdoor_server</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sock</span></em>, <em class="sig-param"><span class="n">locals</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#eventlet.backdoor.backdoor_server" title="Permalink to this definition">¶</a></dt>
<dd><p>Blocking function that runs a backdoor server on the socket <em>sock</em>,
accepting connections and running backdoor consoles for each client that
connects.</p>
<p>The <em>locals</em> argument is a dictionary that will be included in the locals()
of the interpreters.  It can be convenient to stick important application
variables in here.</p>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="../modules.html"
                        title="previous chapter">Module Reference</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="corolocal.html"
                        title="next chapter"><code class="xref py py-mod docutils literal notranslate"><span class="pre">corolocal</span></code> – Coroutine local storage</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/modules/backdoor.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="corolocal.html" title="corolocal – Coroutine local storage"
             >next</a> |</li>
        <li class="right" >
          <a href="../modules.html" title="Module Reference"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Eventlet 0.28.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../modules.html" >Module Reference</a> &#187;</li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2005-2010, Eventlet Contributors.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.0.0.
    </div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-42952223-1', 'eventlet.net');
  ga('send', 'pageview');
</script>

  </body>
</html>